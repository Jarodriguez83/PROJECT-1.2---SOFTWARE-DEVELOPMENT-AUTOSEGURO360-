<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ titulo_pagina }}</title>
    <link rel="stylesheet" href="{{ url_for('static', path='/style.css') }}">
    <link rel="shortcut icon"
        href="https://okuotijfayaoecerimfi.supabase.co/storage/v1/object/public/IMAGENES-AUTOSEGURO360/BANNER/FAVICON.jpeg"
        type="image/x-icon">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
</head>

<body>
    <header class="header-container">
        <nav class="top-nav">
            <div class="logo">
                <span class="logo-text">AUTOSEGURO 360</span>
            </div>
            <ul class="nav-links">
                <li><a href="/">CARROS</a></li>
                <li><a href="/vehiculos/registro">REGISTRAR VEHICULO</a></li>
                <li><a href="/compras/registro">COMPRAS</a></li>
                <li><a href="/usuarios/registro">USUARIO</a></li>
                <li><a href="/docs" target="_blank">API DOCS</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <br><br>
        <section class="hero-banner">
            <div class="hero-image-overlay">
                <img src="IMG/BANNER PRINCIPAL.jpeg" alt="">
                <div class="hero-content">
                    <p class="new-tag">NUEVO SED√ÅN CON ESTILO Y DEPORTIVIDAD</p>
                    <h1 class="vehicle-model">EL NUEVO K3 SED√ÅN | KIA</h1>
                    <p class="slogan">M√ÅS ALL√Å DE LO POSIBLE.</p>

                    <div class="price-security">
                        <span class="price">PRECIO DE OFERTA</span>
                        <span class="amount">$80.900.000</span>
                    </div>

                    <div class="security-icons">
                        <div class="icon-item">üõ°Ô∏è<p>SISTEMA ANTIBLOQUEO DE FRENOS</p>
                        </div>
                        <div class="icon-item">‚öôÔ∏è<p>CONTROL ELECTR√ìNICO DE ESTABILIDAD</p>
                        </div>
                        <div class="icon-item">üö®<p>ALERTA DE COLISI√ìN FRONTAL</p>
                        </div>
                        <div class="icon-item">üë∂<p>SISTEMA DE SUJECI√ìN INFANTIL</p>
                        </div>
                        <div class="icon-item">üí®<p>SISTEMA DE BOLSA DE AIRE (6)</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <div class="content-wrapper">
            <br><br>
            <!-- 1. SECCI√ìN DE FILTROS DE B√öSQUEDA -->
            <section class="filters-container" id="filtros">
                <center>
                    <h2>BUSCADOR DE VEH√çCULOS | FILTROS</h2>
                </center>
                <!-- FORMULARIO DE B√öSQUEDA GET: Env√≠a par√°metros a la ruta ra√≠z (homepage) -->
                <form action="/" method="GET" class="filters-grid filters-simplified" id="filter-form">

                    <div class="filter-group text-search-field">
                        <label for="busqueda_texto">MARCA, MODELO O L√çNEA</label>
                        <input type="text" id="busqueda_texto" name="busqueda_texto" placeholder="Ej: Chevrolet Captiva"
                            value="{{ current_search }}">
                    </div>

                    <div class="filter-group">
                        <label for="anio_filtro">A√ëO</label>
                        <select id="anio_filtro" name="anio_filtro">
                            <option value="" {% if current_anio=="" %}selected{% endif %}>Cualquier A√±o</option>
                            <option value="2024" {% if current_anio=="2024" %}selected{% endif %}>2024</option>
                            <option value="2023" {% if current_anio=="2023" %}selected{% endif %}>2023</option>
                            <option value="2022" {% if current_anio=="2022" %}selected{% endif %}>2022</option>
                            <option value="2021" {% if current_anio=="2021" %}selected{% endif %}>2021</option>
                            <option value="2020" {% if current_anio=="2020" %}selected{% endif %}>2020</option>
                        </select>
                    </div>

                    <div class="filter-group">
                        <label for="ncap_filtro">SEGURIDAD (NCAP)</label>
                        <select id="ncap_filtro" name="ncap_filtro">
                            <option value="" {% if current_ncap=="" %}selected{% endif %}>Cualquier Nivel</option>
                            <option value="4" {% if current_ncap=="4" %}selected{% endif %}>4 +</option>
                            <option value="3" {% if current_ncap=="3" %}selected{% endif %}>3 +</option>
                            <option value="2" {% if current_ncap=="2" %}selected{% endif %}>2 +</option>
                            <option value="1" {% if current_ncap=="1" %}selected{% endif %}>1 +</option>
                        </select>
                    </div>

                    <div class="filter-group">
                        <label for="precio_max">PRECIO M√ÅXIMO</label>
                        <select id="precio_max" name="precio_max">
                            <option value="" {% if current_precio=="" %}selected{% endif %}>Sin L√≠mite</option>
                            <option value="50000000" {% if current_precio=="50000000" %}selected{% endif %}>$50,000,000
                            </option>
                            <option value="100000000" {% if current_precio=="100000000" %}selected{% endif %}>
                                $100,000,000</option>
                            <option value="200000000" {% if current_precio=="200000000" %}selected{% endif %}>
                                $200,000,000</option>
                            <option value="500000000" {% if current_precio=="500000000" %}selected{% endif %}>
                                $500,000,000</option>
                        </select>
                    </div>

                    <div class="filter-buttons">
                        <button type="submit" class="apply-filters-btn">BUSCAR</button>
                        <button type="button" class="clear-filters-btn" id="clear-button">LIMPIAR</button>
                    </div>
                </form>
            </section>

            <!-- 2. SECCI√ìN DE RESULTADOS (CAT√ÅLOGO DIN√ÅMICO) -->
            <section class="results-container">
                <center>
                    <h2>VEH√çCULOS DISPONIBLES | VENTA </h2>
                </center>
                <div class="vehicle-cards-grid">

                    {# L√≥gica Jinja2: Itera sobre la lista de veh√≠culos #}
                    {% if vehicles %}
                    {% for vehiculo in vehicles %}
                    <div class="vehicle-card">
                        <div class="card-image">
                            <!-- Imagen del veh√≠culo: usa la URL de Supabase si existe, sino un placeholder -->
                            <img src="{{ vehiculo.foto_url or 'https://placehold.co/300x200/555/ffff?text=IMAGEN+NO+DISPONIBLE' }}"
                                alt="{{ vehiculo.marca }} {{ vehiculo.linea }}"
                                onerror="this.onerror=null; this.src='https://placehold.co/300x200/555/fff?text=IMAGEN+ERROR';">
                        </div>
                        <div class="card-content">
                            <h3 class="card-title">{{ vehiculo.marca }} {{ vehiculo.linea }}</h3>
                            <div class="card-price">
                                <span class="price-tag">PRECIO: ${{ "{:,.0f}".format(vehiculo.precio | float) }}</span>
                            </div>
                            <div class="card-details">
                                <span>A√ëO: {{ vehiculo.modelo }}</span>
                                <span>NCAP: {{ vehiculo.nivel_seguridad }}/5</span>
                                <span>PLACA: {{ vehiculo.placa }}</span>
                            </div>
                            <div class="card-actions">
                                <a href="/compras/registro?placa={{ vehiculo.placa }}" class="btn-buy">COMPRAR
                                    VEHICULO</a>
                                <button class="btn-compare">REGISTRAR USUARIO</button>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                    {% else %}
                    <!-- Mensaje si no hay resultados -->
                    <p class="no-results-message">No hay veh√≠culos disponibles para la venta en este momento. ¬°Registra
                        uno para empezar!</p>
                    <p><a href="/vehiculos/registro">Registrar Nuevo Veh√≠culo</a></p>
                    {% endif %}

                </div>
            </section>
    </main>
    <!-- FOOTER  -->
    <footer class="main-footer">
        <div class="footer-grid">

            <div class="footer-col footer-branding">
                <div class="footer-logo">
                    <span class="logo-text">AUTOSEGURO360</span>
                    <br><br>
                    <p class="project-subtitle">LA SEGURIDAD EN TU CAMINO</p>
                </div>
                <h3>P√ÅGINAS RELACIONADAS</h3>
                <div class="partner-logos">
                    <center>
                        <a href="https://www.latinncap.com/es/" target="_blank"><img
                                src="https://placehold.co/60x30/004d99/ffffff?text=NCAP" alt="NCAP" target="_blank"></a>
                        <br>
                        <a href="https://mintransporte.gov.co/" target="_blank"><img
                                src="https://placehold.co/180x30/004d99/ffffff?text=MINTRANSPORTE"
                                alt="MINTRANSPORTE"></a>
                    </center>
                </div>
            </div>
            <div class="footer-col">
                <h3>EMPRESA</h3>
                <ul>
                    <li><a href="#">ACCESO COLABORADORES</a></li>
                    <li><a href="#">TRABAJE CON NOSOTROS</a></li>
                    <li><a href="#">PQR & SERVICIO AL CLIENTE</a></li>
                    <li><a href="#">POL√çTICA DE PROTECCI√ìN DE DATOS</a></li>
                    <li><a href="#">GESTI√ìN SOCIAL</a></li>
                </ul>
            </div>
            <div class="footer-col">
                <h3>MEN√ö R√ÅPIDO</h3>
                <ul>
                    <li><a href="#">VEH√çCULOS NUEVOS</a></li>
                    <li><a href="#">FICHA T√âCNICA (CRUD)</a></li>
                    <li><a href="#">REGISTRO DE COMPRAS</a></li>
                    <li><a href="/usuarios/registro">REGISTRO DE USUARIOS</a></li>
                    <li><a href="#citas">CITA TALLER</a></li>
                    <li><a href="#">VITRINAS & TALLERES</a></li>
                </ul>
            </div>
            <div class="footer-col">
                <h3>VIABILIDAD Y REPORTES</h3>
                <ul>
                    <li><a href="#">INFORME DE SINIESTRALIDAD (DASHBOARD)</a></li>
                    <li><a href="#">REPORTE ESTAD√çSTICO DE COMPRAS</a></li>
                </ul>
                <div class="payment-icon">
                    <img src="https://placehold.co/150x50/007bff/ffffff?text=PAGOS+SEGUROS" alt="PAGOS SEGUROS">
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 AutoSeguro360. Desarrollado por Jhon Alexander Rodriguez Redondo. Todos los derechos
                reservados.</p>
        </div>
    </footer>
</body>

</html>